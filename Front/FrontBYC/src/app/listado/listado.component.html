<app-header></app-header>

<div class="main-content container">
  <h2>Documentos a pagar</h2>
  <hr class="my-3 dark-line" />

  <div class="row">
    @for (item of unpaidExpenses$ |async; track $index) {

    <div class="col-12 col-md-4">
      <app-expense-card [billDueDate]="item.first_expiration_date" [billAmount]="item.first_expiration_amount"
        (sendAmount)="recieveAmount($event)" />
    </div>
    }

  </div>

  <div class="d-flex justify-content-between align-items-center my-4">
    <h4>Total a Pagar: {{ total | currency: 'USD' }}</h4>
    <button class="btn btn-pagar" [disabled]="total === 0">Pagar</button>
  </div>

  <h2>Documentos pagados</h2>
  <hr class="my-3 dark-line" />


  <div class="filter-container row">
    <div class="filter-item col-lg-3 col-md-4 col-sm-12 col-12 mb-3">
      <label for="filtroDesde">Desde:</label>
      <input id="filtroDesde" type="date" [(ngModel)]="filtroDesde" class="form-control" />
    </div>
    <div class="filter-item">
      <label for="filtroHasta">Hasta:</label>
      <input id="filtroHasta" type="date" [(ngModel)]="filtroHasta" class="form-control" />
    </div>
    <div class="filter-item">
      <label for="filtroEstado">Estado:</label>
      <select id="filtroEstado" [(ngModel)]="filtroEstado" class="form-control">
        <option value="">Todos</option>
        <option value="Pagado">Pagado</option>
        <option value="Pendiente">Pendiente</option>
      </select>
    </div>
    <div class="filter-item">
      <label>&nbsp;</label>
      <button class="btn btn-success form-control">Buscar</button>
    </div>
  </div>

  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Fecha de pago</th>
        <th>Periodo</th>
        <th>Importe</th>
        <th>Estado</th>
        <th>Descargar</th>
      </tr>
    </thead>
    <tbody>
      @for (item of paidExpenses; track $index) {
      <tr>
        <td>{{ item.selected }}</td>
        <td>{{ item.period }}</td>
        <td>${{ item.first_expiration_amount }}</td>
        <td>{{ item.status }}</td>
        <td><a href="#"><i class="fas fa-download download-icon"></i></a></td>
      </tr>
      }

    </tbody>
  </table>
</div>